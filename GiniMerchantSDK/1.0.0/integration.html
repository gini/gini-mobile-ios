<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Integration  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Integration  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
        <img class="logo-icon" src="img/logo.png"/>
    
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/gini/gini-mobile-ios.git">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">GiniMerchantSDK Reference</a>
      <img class="carat" src="img/carat.png" />
      Integration  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration.html">Integration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="customization-guide.html">Customization guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="event-tracking-guide.html">Event tracking guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="testing.html">Testing</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BottomSheetController.html">BottomSheetController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CancellationToken.html">CancellationToken</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DefaultDocumentService.html">DefaultDocumentService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Extraction.html">Extraction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Extraction/Box.html">– Box</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Extraction/Candidate.html">– Candidate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExtractionResult.html">ExtractionResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/GiniMerchant.html">GiniMerchant</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/GiniMerchant/Constants.html">– Constants</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/GiniMerchantConfiguration.html">GiniMerchantConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PaymentComponentsController.html">PaymentComponentsController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PaymentReviewModel.html">PaymentReviewModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PaymentReviewViewController.html">PaymentReviewViewController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ZoomedImageView.html">ZoomedImageView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ZoomedImageView/ScaleMode.html">– ScaleMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ZoomedImageView/Offset.html">– Offset</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Global Variables.html">Other Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Global%20Variables.html#/s:15GiniMerchantSDK0aB10SDKVersionSSvp">GiniMerchantSDKVersion</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Enumerations.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ExtractionType.html">ExtractionType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/GiniError.html">GiniError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/GiniMerchantError.html">GiniMerchantError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/GiniMerchantImage.html">GiniMerchantImage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/LogLevel.html">LogLevel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PaymentReviewScreenEventType.html">PaymentReviewScreenEventType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PaymentState.html">PaymentState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PlatformSupported.html">PlatformSupported</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Extensions.html#/AppKit">AppKit</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Functions.html">Other Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Functions.html#/s:15GiniMerchantSDK04giniB6BundleSo8NSBundleCyF">giniMerchantBundle()</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GiniErrorProtocol.html">GiniErrorProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GiniMerchantDelegate.html">GiniMerchantDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Protocols.html#/s:15GiniMerchantSDK0aB16TrackingDelegateP">GiniMerchantTrackingDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ImageScrollViewDelegate.html">ImageScrollViewDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PaymentComponentsControllerProtocol.html">PaymentComponentsControllerProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PaymentProvidersBottomViewProtocol.html">PaymentProvidersBottomViewProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PaymentReviewScreenTrackingDelegate.html">PaymentReviewScreenTrackingDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Structures.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ButtonConfiguration.html">ButtonConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CompositeDocument.html">CompositeDocument</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CompositeDocumentInfo.html">CompositeDocumentInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DataForReview.html">DataForReview</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document.html">Document</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Layout.html">– Layout</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Progress.html">– Progress</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Origin.html">– Origin</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/SourceClassification.html">– SourceClassification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Page.html">– Page</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Links.html">– Links</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/DocType.html">– DocType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/TypeV2.html">– TypeV2</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Document/Metadata.html">– Metadata</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ExtractionsContainer.html">ExtractionsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MinAppVersions.html">MinAppVersions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Structs.html#/s:15GiniMerchantSDK27PageCollectionCellViewModelV">PageCollectionCellViewModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PartialDocumentInfo.html">PartialDocumentInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PaymentComponentConfiguration.html">PaymentComponentConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PaymentInfo.html">PaymentInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PaymentProvider.html">PaymentProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ProviderColors.html">ProviderColors</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TrackingEvent.html">TrackingEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Type Aliases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Typealiases.html#/s:15GiniMerchantSDK16CompletionResulta">CompletionResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Typealiases.html#/s:15GiniMerchantSDK16PaymentProvidersa">PaymentProviders</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='integration' class='heading'>Integration</h1>

<p>The Gini Merchant SDK for iOS provides all the UI and functionality needed to use the Gini API in your app to create payment. The payment information can be reviewed and then the invoice can be paid using any available payment provider app (e.g., banking app).</p>

<blockquote>
<p>⚠️  <strong>Important:</strong>
For supporting each payment provider you need to specify <code>LSApplicationQueriesSchemes</code> in your <code>Info.plist</code> file. App schemes for specification will be provided by Gini.</p>
</blockquote>
<h2 id='ginimerchant-initialization' class='heading'>GiniMerchant initialization</h2>

<blockquote>
<p>⚠️  <strong>Important:</strong>
You should have received Gini API client credentials from us. Please get in touch with us in case you don&rsquo;t have them.</p>
</blockquote>

<p>You can easy initialize <code><a href="Classes/GiniMerchant.html">GiniMerchant</a></code> with the client credentials:</p>
<pre class="highlight swift"><code><span class="kd">private</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">merchant</span> <span class="o">=</span> <span class="kt">GiniMerchant</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">clientID</span><span class="p">,</span> <span class="nv">secret</span><span class="p">:</span> <span class="n">clientPassword</span><span class="p">,</span> <span class="nv">domain</span><span class="p">:</span> <span class="n">clientDomain</span><span class="p">)</span>
</code></pre>
<h2 id='certificate-pinning-optional' class='heading'>Certificate pinning (optional)</h2>

<p>If you want to use <em>Certificate pinning</em>, provide metadata for the upload process, you can pass both your public key pinning configuration for more information)</p>
<pre class="highlight swift"><code>    <span class="kd">private</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">mechant</span> <span class="o">=</span> <span class="kt">GiniMerchant</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">clientID</span><span class="p">,</span> <span class="nv">secret</span><span class="p">:</span> <span class="n">clientPassword</span><span class="p">,</span> <span class="nv">domain</span><span class="p">:</span> <span class="n">clientDomain</span><span class="p">,</span> <span class="nv">pinningConfig</span><span class="p">:</span> <span class="p">[</span><span class="s">"PinnedDomains"</span> <span class="p">:</span> <span class="p">[</span><span class="s">"PublicKeyHashes"</span><span class="p">]])</span>
</code></pre>
<h2 id='integrate-the-payment-component' class='heading'>Integrate the Payment component</h2>

<p>We provide a custom payment component view to help users pay.
Please follow the steps below for the payment component integration.</p>
<h3 id='1-create-an-instance-of-the-code-paymentcomponentscontroller-code' class='heading'>1. Create an instance of the <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code>.</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">paymentComponentsController</span> <span class="o">=</span> <span class="kt">PaymentComponentsController</span><span class="p">(</span><span class="nv">giniMerchant</span><span class="p">:</span> <span class="n">merchant</span><span class="p">)</span>
</code></pre>
<h3 id='2-load-the-payment-providers' class='heading'>2. Load the payment providers</h3>

<p>You will load the list of the payment providers by calling the <code>loadPaymentProviders</code> function from the <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> and conform to the <code><a href="Protocols/PaymentComponentsControllerProtocol.html">PaymentComponentsControllerProtocol</a></code>.</p>
<pre class="highlight swift"><code><span class="n">paymentComponentsController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span> <span class="c1">// where self is your viewController</span>
<span class="n">paymentComponentsController</span><span class="o">.</span><span class="nf">loadPaymentProviders</span><span class="p">()</span>
</code></pre>

<ul>
<li><p><code><a href="Protocols/PaymentComponentsControllerProtocol.html">PaymentComponentsControllerProtocol</a></code> provides information when the <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> is loading.
You can show/hide an <code>UIActivityIndicator</code> based on that.</p></li>
<li><p><code><a href="Protocols/PaymentComponentsControllerProtocol.html">PaymentComponentsControllerProtocol</a></code> provides completion handlers when <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> fetched successfully payment providers or when it failed with an error.</p></li>
</ul>

<blockquote>
<p><strong>Note:</strong>
It should be sufficient to call paymentComponentsController.loadPaymentProviderApps() only once when your app starts.</p>

<ul>
<li>We effectively handle situations where there are no payment providers available.</li>
<li>Based on the payment provider&rsquo;s colors, the <code>UIView</code> will automatically change its color.</li>
</ul>
</blockquote>
<h3 id='3-show-the-paymentcomponentbottomview' class='heading'>3. Show the PaymentComponentBottomView</h3>

<p>In this step you will show the <code>PaymentComponentBottomView</code> in a bottom sheet.
This function provides the UIViewController and you cand present it anywhere.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">paymentViewBottomSheet</span><span class="p">(</span><span class="nv">documentID</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">UIViewController</span> 
</code></pre>
<pre class="highlight plaintext"><code>let paymentViewBottomSheet = paymentComponentsController.paymentViewBottomSheet(documentID: nil)
paymentViewBottomSheet.modalPresentationStyle = .overFullScreen
present(paymentViewBottomSheet, animated: false)
</code></pre>

<blockquote>
<p><strong>Note:</strong> </p>

<ul>
<li>We strongly recommend to present <code>PaymentComponentBottomView</code> modally with a <code>.overFullScreen</code> presentation style.</li>
<li>Based on the payment provider&rsquo;s colors, the <code>UIView</code> will automatically change its color.</li>
</ul>
</blockquote>

<ul>
<li><code><a href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a></code> is the view protocol and provides events handlers when the user tapped on various areas on the payment component view (more information icon, bank/payment provider picker, the pay invoice button and etc.).</li>
</ul>

<blockquote>

<ul>
<li>Make sure you properly link <code><a href="Protocols/PaymentComponentsControllerProtocol.html">PaymentComponentsControllerProtocol</a></code> and <code><a href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a></code> delegates to get notified.</li>
</ul>
</blockquote>
<h2 id='show-paymentinfoviewcontroller' class='heading'>Show PaymentInfoViewController</h2>

<p>The <code>PaymentInfoViewController</code> displays information and an FAQ section about the payment feature.
It requires a <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> instance (see <code>Integrate the Payment component</code> step 1).</p>

<blockquote>
<p><strong>Note:</strong> </p>

<ul>
<li>The <code>PaymentInfoViewController</code> can be presented modally, used in a container view or pushed to a navigation view controller. Make sure to add your own navigation around the provided views.</li>
<li>Please make sure to dismiss presentedViewController (usually <code>PaymentComponentBottomView</code>) before you push the PaymentInfoViewController.</li>
</ul>

<p>⚠️  <strong>Important:</strong></p>

<ul>
<li>The <code>PaymentInfoViewController</code> presentation should happen in <code>func didTapOnMoreInformation(documentId: String?)</code> inside
<code><a href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a></code> implementation.(<code>Integrate the Payment component</code> step 3).</li>
</ul>
</blockquote>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">didTapOnMoreInformation</span><span class="p">(</span><span class="nv">documentId</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">paymentInfoViewController</span> <span class="o">=</span> <span class="n">paymentComponentsController</span><span class="o">.</span><span class="nf">paymentInfoViewController</span><span class="p">()</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">presentedViewController</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">presentedViewController</span> <span class="p">{</span>
        <span class="n">presentedViewController</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">paymentInfoViewController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">paymentInfoViewController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='show-bankselectionbottomsheet' class='heading'>Show BankSelectionBottomSheet</h2>

<p>The <code>BankSelectionBottomSheet</code> displays a list of available banks for the user to choose from.
If a banking app is not installed we will provide an <code>InstallAppBottomView</code> view on the <code>PaymentReviewScreen</code> and you will be able to install that missing app from AppStore.
The <code>BankSelectionBottomSheet</code> presentation requires a <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> instance from the <code>Integrate the Payment component</code> step 1.</p>

<blockquote>
<p><strong>Note:</strong> </p>

<ul>
<li>We strongly recommend to present <code>BankSelectionBottomSheet</code> modally with a <code>.overFullScreen</code> presentation style.</li>
</ul>

<p>⚠️  <strong>Important:</strong></p>

<ul>
<li>The <code>BankSelectionBottomSheet</code> presentation should happen in <code>func didTapOnBankPicker(documentId: String?)</code> inside
<code><a href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a></code> implementation (see <code>Integrate the Payment component</code> step 3).</li>
<li>Please make sure to dismiss presentedViewController (usually <code>PaymentComponentBottomView</code>) before you push the BankSelectionBottomSheet.</li>
</ul>
</blockquote>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">didTapOnBankPicker</span><span class="p">(</span><span class="nv">documentId</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">bankSelectionBottomSheet</span> <span class="o">=</span> <span class="n">paymentComponentsController</span><span class="o">.</span><span class="nf">bankSelectionBottomSheet</span><span class="p">()</span>
    <span class="n">bankSelectionBottomSheet</span><span class="o">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">overFullScreen</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">presentedViewController</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">presentedViewController</span> <span class="p">{</span>
        <span class="n">presentedViewController</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">bankSelectionBottomSheet</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="n">animated</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">bankSelectionBottomSheet</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="n">animated</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='show-paymentreviewviewcontroller-bottom-sheet' class='heading'>Show PaymentReviewViewController Bottom Sheet</h2>

<p>The <code><a href="Classes/PaymentReviewViewController.html">PaymentReviewViewController</a></code> displays payment&rsquo;s details. It also lets users pay the invoice with the bank they selected in the <code>BankSelectionBottomSheet</code>. In here you will be able to revise the amount field of the payment and proceed with the payment.</p>

<p>The <code><a href="Classes/PaymentReviewViewController.html">PaymentReviewViewController</a></code> presentation requires a <code><a href="Classes/PaymentComponentsController.html">PaymentComponentsController</a></code> instance from the <code>Integrate the Payment component</code> step 1 and <code>documentId</code>.</p>

<blockquote>
<p><strong>Note:</strong> </p>

<ul>
<li>The <code><a href="Classes/PaymentReviewViewController.html">PaymentReviewViewController</a></code> can be presented modally, used in a container view or pushed to a navigation view controller. Make sure to add your own navigation around the provided views.</li>
<li>Please make sure to dismiss presentedViewController (usually <code>PaymentComponentBottomView</code>) before you push the PaymentReviewViewController.</li>
</ul>

<p>⚠️  <strong>Important:</strong></p>

<ul>
<li>The <code><a href="Classes/PaymentReviewViewController.html">PaymentReviewViewController</a></code> presentation should happen in <code>func didTapOnPayInvoice(documentId: String?)</code> inside
<code><a href="Protocols/PaymentComponentViewProtocol.html">PaymentComponentViewProtocol</a></code> implementation (see <code>Integrate the Payment component</code> step 3).</li>
</ul>
</blockquote>
<pre class="highlight swift"><code>    <span class="kd">func</span> <span class="nf">didTapOnPayInvoice</span><span class="p">(</span><span class="nv">documentId</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">documentId</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
                    <span class="n">paymentComponentsController</span><span class="o">.</span><span class="nf">loadPaymentReviewScreenFor</span><span class="p">(</span><span class="nv">documentID</span><span class="p">:</span> <span class="n">documentId</span><span class="p">,</span> <span class="nv">paymentInfo</span><span class="p">:</span> <span class="nf">obtainPaymentInfo</span><span class="p">(),</span> <span class="nv">trackingDelegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">viewController</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="p">{</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">showErrorsIfAny</span><span class="p">()</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">viewController</span> <span class="p">{</span>
            <span class="n">viewController</span><span class="o">.</span><span class="n">modalTransitionStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">coverVertical</span>
            <span class="n">viewController</span><span class="o">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">overCurrentContext</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">presentedViewController</span> <span class="o">=</span> <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">presentedViewController</span> <span class="p">{</span>
                <span class="n">presentedViewController</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">viewController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="n">animated</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">viewController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="n">animated</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2024 <a class="link" href="https://gini.net" target="_blank" rel="external noopener">Gini GmbH</a>. All rights reserved. (Last updated: 2024-08-29)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.14.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
